"use strict";(self.webpackChunkveterinariaProyecto=self.webpackChunkveterinariaProyecto||[]).push([[985],{985:(E,l,i)=>{i.r(l),i.d(l,{CrearMascotaModule:()=>U});var m=i(9808),t=i(3075),g=i(842),p=i(5226),n=i.n(p),r=i(5e3),Z=i(1553),c=i(744),f=i(384),v=i(5530),d=i(5245);function h(e,s){if(1&e&&(r.TgZ(0,"span",15),r._uU(1),r.qZA()),2&e){const o=r.oxw();r.xp6(1),r.hij(" Hay un error:",o.nombreError," ")}}function T(e,s){if(1&e&&(r.TgZ(0,"span",15),r._uU(1),r.qZA()),2&e){const o=r.oxw();r.xp6(1),r.hij(" Hay un error: ",o.tipoError," ")}}function A(e,s){if(1&e&&(r.TgZ(0,"span",15),r._uU(1),r.qZA()),2&e){const o=r.oxw();r.xp6(1),r.hij(" Hay un error: ",o.edadError," ")}}const q=function(){return["/paginasUser/menu/menucliente"]};let C=(()=>{class e{constructor(o,a,u,b,M){this.uploadFilesService=o,this.formB=a,this.router=u,this.authServ=b,this.mascotaServi=M,this.submitted=!1,this.loading=!1,this.progressInfo=[],this.message="",this.fileName="",this.registrando=!1,this.reglaNombre="[A-Za-z]{1,20}",this.reglaEdad="[0-9]{1,3}",this.miFormulario=this.formB.group({nombre:[,[t.kI.required,t.kI.minLength(4)]],tipo:[,[t.kI.required]],raza:[,[]],edad:[,[t.kI.required,t.kI.pattern(this.reglaEdad),t.kI.min(0)]],file:[]})}campoEsValido(o){return this.miFormulario.controls[o].errors&&this.miFormulario.controls[o].touched}get nombreError(){var o;const a=null===(o=this.miFormulario.get("nombre"))||void 0===o?void 0:o.errors;return a.required?"El nombre es obligatorio. No puede estar vac\xedo":a.pattern?"El valor ingresado no tiene formato de correo":""}get tipoError(){var o;return(null===(o=this.miFormulario.get("tipo"))||void 0===o?void 0:o.errors).required?"El tipo es obligatorio. No puede estar vac\xedo, selecciona uno, porfavor":""}get edadError(){var o;const a=null===(o=this.miFormulario.get("edad"))||void 0===o?void 0:o.errors;return a.required?"La edad es obligatoria. No puede estar vac\xedo":a.pattern?"El valor ingresado no tiene formato de correo.No puede se valores negativos":""}ngOnInit(){}crearNuevaMascota(){if(!this.registrando){if(this.submitted=!0,this.miFormulario.markAllAsTouched(),this.miFormulario.invalid)return void n().fire("Error","No esta correcto el formato de los datos introducidos","error");this.nuevaMascota=this.miFormulario.value,console.log(this.nuevaMascota.file),this.loading=!0;const o=this.authServ.getToken();this.registrando=!0,this.cargaRegistro(),this.mascotaServi.addPet(o,this.nuevaMascota).subscribe({next:a=>{n().fire({position:"center",icon:"success",title:"Se ha registrado correctamente tu mascota",showConfirmButton:!1,timer:2500}),(0,g.g)(2500),window.location.href="../paginasUser/menu/menucliente"},error:a=>{n().fire("Error",a.error.mensaje,"error")}})}}volverMenu(){window.history.back()}cargarRegresar(){n().fire({title:"Por favor, espere",timer:2070}),n().showLoading()}cargaRegistro(){n().fire({title:"Por favor, espere",timer:1600}),n().showLoading()}}return e.\u0275fac=function(o){return new(o||e)(r.Y36(Z.N),r.Y36(t.qu),r.Y36(c.F0),r.Y36(f.e),r.Y36(v.F))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-crear-mascota"]],decls:61,vars:6,consts:[[1,"h1","text-info","row","p-3","my-3"],["enctype","multipart/form-data",3,"formGroup","ngSubmit"],[1,"form-group","row","my-2","justify-content-center"],[1,"text-info","h4","p-2"],[1,"col-sm-10"],["type","text","formControlName","nombre","id","nombre","placeholder","Nombre de su mascota",1,"form-control"],["class","form-text text-danger",4,"ngIf"],["name","transporte","formControlName","tipo","id","tipo","required","",1,"form-control"],["selected","true"],["type","name","formControlName","raza","id","raza","value","SinRazaPordefecto","placeholder","Pon la raza, puedes dejarlo vacio si no tiene o no sabes",1,"form-control"],["type","Number","formControlName","edad","id","edad","placeholder","Edad de tu mascota",1,"form-control"],[1,"form-group","row","p-3","justify-content-center"],[1,"col-sm-12"],["id","botonregresarfor","routerLinkActive","active",1,"btn","btn-secondary","col-12","col-lg-6","text-white","p-3",3,"routerLink","click"],["id","botonregistro","type","submit",1,"btn","btn-info","col-12","col-lg-6","p-3"],[1,"form-text","text-danger"]],template:function(o,a){1&o&&(r.TgZ(0,"p",0),r.TgZ(1,"strong"),r.TgZ(2,"mat-icon"),r._uU(3,"pets"),r.qZA(),r._uU(4,"Registra a tu mascota"),r.TgZ(5,"mat-icon"),r._uU(6,"pets"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(7,"form",1),r.NdJ("ngSubmit",function(){return a.crearNuevaMascota()}),r.TgZ(8,"div",2),r.TgZ(9,"p",3),r.TgZ(10,"strong"),r._uU(11,"~Nombre de tu mascota*~"),r.qZA(),r.qZA(),r.TgZ(12,"div",4),r._UZ(13,"input",5),r.YNc(14,h,2,1,"span",6),r.qZA(),r.qZA(),r.TgZ(15,"div",2),r.TgZ(16,"p",3),r.TgZ(17,"strong"),r._uU(18,"~Tipo de mascota*~"),r.qZA(),r.qZA(),r.TgZ(19,"div",4),r.TgZ(20,"select",7),r.TgZ(21,"option",8),r._uU(22,"Perro"),r.qZA(),r.TgZ(23,"option"),r._uU(24," Gato"),r.qZA(),r.TgZ(25,"option"),r._uU(26,"Paj\xe1ro"),r.qZA(),r.TgZ(27,"option"),r._uU(28,"Rept\xedl"),r.qZA(),r.TgZ(29,"option"),r._uU(30,"Roedor"),r.qZA(),r.TgZ(31,"option"),r._uU(32,"Otro"),r.qZA(),r.qZA(),r.YNc(33,T,2,1,"span",6),r.qZA(),r.qZA(),r.TgZ(34,"div",2),r.TgZ(35,"p",3),r.TgZ(36,"strong"),r._uU(37,"~Raza de tu mascota~ "),r.qZA(),r.qZA(),r.TgZ(38,"div",4),r._UZ(39,"input",9),r.qZA(),r.qZA(),r.TgZ(40,"div",2),r.TgZ(41,"p",3),r.TgZ(42,"strong"),r._uU(43,"~Edad de tu mascota*~ "),r.qZA(),r.qZA(),r.TgZ(44,"div",4),r._UZ(45,"input",10),r.YNc(46,A,2,1,"span",6),r.qZA(),r.qZA(),r.TgZ(47,"div",11),r.TgZ(48,"div",12),r.TgZ(49,"a",13),r.NdJ("click",function(){return a.cargarRegresar()}),r.TgZ(50,"strong"),r.TgZ(51,"mat-icon"),r._uU(52,"arrow_back"),r.qZA(),r._uU(53," Volver al men\xfa de cliente"),r.qZA(),r.qZA(),r.TgZ(54,"button",14),r.TgZ(55,"strong"),r._uU(56,"Registrar tu mascota"),r.TgZ(57,"mat-icon"),r._uU(58,"create_new_folder"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r._UZ(59,"br"),r._UZ(60,"br")),2&o&&(r.xp6(7),r.Q6J("formGroup",a.miFormulario),r.xp6(7),r.Q6J("ngIf",a.campoEsValido("nombre")),r.xp6(19),r.Q6J("ngIf",a.campoEsValido("tipo")),r.xp6(13),r.Q6J("ngIf",a.campoEsValido("edad")),r.xp6(3),r.Q6J("routerLink",r.DdM(5,q)))},directives:[d.Hw,t._Y,t.JL,t.sg,t.Fj,t.JJ,t.u,m.O5,t.EJ,t.Q7,t.YN,t.Kr,t.wV,c.yS,c.Od],encapsulation:2}),e})(),U=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[m.ez,t.UX,t.u5,c.Bz,d.Ps,c.Bz.forChild([{path:"addMascota",component:C}])]]}),e})()}}]);