"use strict";(self.webpackChunkveterinariaProyecto=self.webpackChunkveterinariaProyecto||[]).push([[499],{1499:(x,d,a)=>{a.r(d),a.d(d,{CambiarpassdeunusuarioModule:()=>A});var m=a(9808),t=a(3075),p=a(5226),l=a.n(p),f=a(842),o=a(5e3),Z=a(4051),c=a(744),h=a(9574),g=a(5245);function C(e,u){if(1&e&&(o.TgZ(0,"span",20),o._uU(1),o.qZA()),2&e){const r=o.oxw(2);o.xp6(1),o.hij(" Error: ",r.passError," ")}}function T(e,u){if(1&e){const r=o.EpF();o.TgZ(0,"form",5),o.NdJ("ngSubmit",function(){return o.CHM(r),o.oxw().editarpassUsuario()}),o.TgZ(1,"div",6),o.TgZ(2,"p",7),o.TgZ(3,"strong"),o._uU(4,"Su id "),o.qZA(),o.qZA(),o.TgZ(5,"div",8),o.TgZ(6,"input",9),o.NdJ("ngModelChange",function(n){return o.CHM(r),o.oxw().usuario.id=n}),o.qZA(),o.qZA(),o.qZA(),o.TgZ(7,"div",6),o.TgZ(8,"p",7),o.TgZ(9,"strong"),o._uU(10,"Su nombre "),o.qZA(),o.qZA(),o.TgZ(11,"div",8),o.TgZ(12,"input",10),o.NdJ("ngModelChange",function(n){return o.CHM(r),o.oxw().usuario.nombre=n}),o.qZA(),o.qZA(),o.qZA(),o.TgZ(13,"div",6),o.TgZ(14,"p",11),o.TgZ(15,"strong"),o._uU(16,"Su contrase\xf1a "),o.qZA(),o.qZA(),o.TgZ(17,"div",8),o.TgZ(18,"input",12),o.NdJ("ngModelChange",function(n){return o.CHM(r),o.oxw().usuario.password=n}),o.qZA(),o.YNc(19,C,2,1,"span",13),o.qZA(),o.qZA(),o.TgZ(20,"div",6),o.TgZ(21,"p",11),o.TgZ(22,"strong"),o._uU(23,"Su direcci\xf3n "),o.qZA(),o.qZA(),o.TgZ(24,"div",8),o.TgZ(25,"input",14),o.NdJ("ngModelChange",function(n){return o.CHM(r),o.oxw().usuario.direccion=n}),o.qZA(),o.qZA(),o.qZA(),o.TgZ(26,"div",6),o.TgZ(27,"p",11),o.TgZ(28,"strong"),o._uU(29,"Su tel\xe9fono "),o.qZA(),o.qZA(),o.TgZ(30,"div",8),o.TgZ(31,"input",15),o.NdJ("ngModelChange",function(n){return o.CHM(r),o.oxw().usuario.telefono=n}),o.qZA(),o.qZA(),o.qZA(),o.TgZ(32,"div",16),o.TgZ(33,"div",17),o.TgZ(34,"a",18),o.NdJ("click",function(){return o.CHM(r),o.oxw().volver()}),o.TgZ(35,"strong"),o.TgZ(36,"mat-icon"),o._uU(37,"arrow_back"),o.qZA(),o._uU(38," Volver al men\xfa de cliente"),o.qZA(),o.qZA(),o.TgZ(39,"button",19),o.TgZ(40,"strong"),o._uU(41," Editar la contrase\xf1a del usuario "),o.TgZ(42,"mat-icon"),o._uU(43," border_color"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()}if(2&e){const r=o.oxw();o.Q6J("formGroup",r.miFormulario),o.xp6(6),o.Q6J("ngModel",r.usuario.id),o.xp6(6),o.Q6J("ngModel",r.usuario.nombre),o.xp6(6),o.Q6J("ngModel",r.usuario.password),o.xp6(1),o.Q6J("ngIf",r.campoEsValido("password")),o.xp6(6),o.Q6J("ngModel",r.usuario.direccion),o.xp6(6),o.Q6J("ngModel",r.usuario.telefono)}}let b=(()=>{class e{constructor(r,i,n,s){this.servicliente=r,this.router=i,this.formB=n,this.adminservi=s,this.submitted=!1,this.loading=!1,this.editando=!1,this.correoUsuario="",this.reglaEmail="^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$",this.reglaNombre="[A-Za-z]{1,20}",this.reglaApellidos="^[A-Za-z]{1,20}[' ']{1}[A-Za-z]{1,20}$",this.reglaPass="",this.reglaTelefono="[0-9]{9}",this.miFormulario=this.formB.group({id:[],nombre:["",[t.kI.required,t.kI.minLength(4)]],password:["",[]],direccion:["",[t.kI.required]],telefono:["",[t.kI.required,t.kI.pattern(this.reglaTelefono)]]})}ngOnInit(){this.usuario=this.adminservi.recogerUsuario(),this.correoUsuario=localStorage.getItem("usuarioEditarPass"),this.servicliente.recogerInfoClienteporCorreo(this.correoUsuario).subscribe(r=>{this.usuario=r})}campoEsValido(r){return this.miFormulario.controls[r].errors&&this.miFormulario.controls[r].touched}get passError(){var r;const i=null===(r=this.miFormulario.get("password"))||void 0===r?void 0:r.errors;return i.required?"Contrase\xf1a es obligatoria, no puede estar vacio":i.pattern?"Debe contener m\xednimo 4 caracteres":""}editarpassUsuario(){if(1!=this.editando){if(this.miFormulario.markAllAsTouched(),this.submitted=!0,this.miFormulario.invalid)return void l().fire({icon:"error",title:"Error",text:"No esta correcto el formato de los datos introducidos"});this.usuarioPassEditado=this.miFormulario.value,console.log(this.usuarioPassEditado),this.carga(),this.adminservi.cambiarPassDeUnUsuario(this.usuarioPassEditado).subscribe({next:r=>{l().fire({title:"Editado correctamente",text:"Tu usuario ha sido editado.",icon:"success",position:"center",timer:2500}),(0,f.g)(2500),window.history.back()},error:r=>{l().fire("Error",r.error.message,"error")}})}}carga(){l().fire({title:"Por favor, espere",timer:2500}),l().showLoading()}volver(){window.history.back()}}return e.\u0275fac=function(r){return new(r||e)(o.Y36(Z.$),o.Y36(c.F0),o.Y36(t.qu),o.Y36(h.A))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-cambiarpassdeunusuario"]],decls:9,vars:1,consts:[[1,"h1","text-info"],[1,"text-info"],[1,"row","justify-content-centrer"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12","bg-white","py-5","mt-5","rounded","text-center"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"form-group","row","my-2"],[1,"text-info","h4","py-2"],[1,"col-sm-12"],["type","number","formControlName","id","id","id","readonly","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","id","nombre","formControlName","nombre","readonly","",1,"form-control",3,"ngModel","ngModelChange"],[1,"text-info","h4","p-2"],["type","password","formControlName","password","id","password","placeholder","Escribe la contrase\xf1a, solo si desea cambiarla, sino dejalo blanco",1,"form-control",3,"ngModel","ngModelChange"],["class","form-text text-danger",4,"ngIf"],["type","text","formControlName","direccion","id","direccion","readonly","","placeholder","Escribe tu direcci\xf3n. Puedes realizarlo m\xe1s tarde",1,"form-control",3,"ngModel","ngModelChange"],["type","number","formControlName","telefono","id","telefono","readonly","","placeholder","Escribe tu tel\xe9fono",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-group","row"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12","my-3"],["id","botonregresarfor",1,"btn","btn-secondary","text-white","col-12","col-lg-6","p-3",3,"click"],["id","botonregistro","type","submit",1,"btn","btn-info","col-12","col-lg-6","p-3"],[1,"form-text","text-danger"]],template:function(r,i){1&r&&(o.TgZ(0,"p"),o._uU(1,"cambiarpassdeunusuario works!"),o.qZA(),o.TgZ(2,"p",0),o.TgZ(3,"strong"),o._uU(4,"~Editar tus datos~"),o.qZA(),o.qZA(),o._UZ(5,"hr",1),o.TgZ(6,"div",2),o.TgZ(7,"div",3),o.YNc(8,T,44,7,"form",4),o.qZA(),o.qZA()),2&r&&(o.xp6(8),o.Q6J("ngIf",i.usuario))},directives:[m.O5,t._Y,t.JL,t.sg,t.wV,t.Fj,t.JJ,t.u,g.Hw],encapsulation:2}),e})();var v=a(9444);let A=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[m.ez,t.u5,v.uH,g.Ps,t.UX,c.Bz.forChild([{path:"cambiarpass",component:b}])]]}),e})()}}]);